<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet version="1.0"	xmlns="http://www.w3.org/1999/xhtml"	xmlns:html="http://www.w3.org/1999/xhtml"	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"	xmlns:sfm="http://schema.slothsoft.net/farah/module"> 	<xsl:output method="xml" indent="no" encoding="UTF-8" media-type="application/xhtml+xml" version="1.0"/>	<xsl:template match="/*">		<xsl:variable name="pageTitles" select="request/page | request/domain"/>		<xsl:variable name="pageContent" select="sfm:data[@name='content']"/>		<xsl:variable name="pageHeadings" select="$pageContent//html:h2[../@id]"/>		<xsl:variable name="chatNode" select="sfm:data[@name='chat']"/>		<xsl:variable name="requestedPage" select="request/*[1]"/>		<html><!-- manifest="{request/@url}?appcache"-->			<head>				<!--<xsl:copy-of select="$pageTitles"/>-->				<title>					<!--<xsl:value-of select="page/@header"/>-->					<xsl:for-each select="$pageTitles">						<xsl:if test="position() &gt; 1">							<xsl:text> - </xsl:text>						</xsl:if>						<p data-dict="."><xsl:value-of select="@title"/></p>					</xsl:for-each>					<!--<p data-dict="."><xsl:value-of select="request/domain/@title"/></p>-->				</title>				<link rel="icon" type="image/png" href="/getResource.php/slothsoft/favicon"/>								<link rel="canonical" href="{request/@url}"/>				<link rel="alternate" href="{request/@url}" hreflang="x-default" />				<link rel="alternate" href="{request/@url}?lang=de-de" hreflang="de-de" />				<link rel="alternate" href="{request/@url}?lang=en-us" hreflang="en-us" />								<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>				<meta name="author" content="Daniel Schulz"/>				<meta name="keywords">					<xsl:attribute name="content">						<xsl:for-each select="$pageTitles">							<xsl:if test="position() &gt; 1">								<xsl:text>,</xsl:text>							</xsl:if>							<p data-dict="."><xsl:value-of select="@title"/></p>						</xsl:for-each>					</xsl:attribute>				</meta>				<!--<xsl:copy-of select="."/>-->			</head>			<body class="layout-slothsoft">				<div>					<div data-media="screen"/>					<header class="Title">						<xsl:copy-of select="sfm:data[@name='status']/node()"/>						<h1 data-media="screen">							<xsl:if test="count($pageTitles) &gt; 1">								<small class="breadcrumb">									<xsl:for-each select="$pageTitles">										<xsl:sort select="position()" order="descending"/>										<xsl:variable name="pos" select="position()"/>										<xsl:if test="position() &gt; 1">											<xsl:text> » </xsl:text>										</xsl:if>										<xsl:choose>											<xsl:when test="position() = last()"/>											<xsl:when test="not(@ref)">												<span data-dict=""><xsl:value-of select="@title"/></span>											</xsl:when>											<xsl:otherwise>												<span data-dict=""><xsl:value-of select="@title"/></span>												<!--												<a href="{@uri}" data-dict="">													<xsl:value-of select="@title"/>												</a>												-->											</xsl:otherwise>										</xsl:choose>									</xsl:for-each>								</small>							</xsl:if>							<span data-dict=""><xsl:value-of select="$pageTitles[1]/@title"/></span>						</h1>						<!--						<xsl:if test="$pageHeadings">							<ul class="toc">								<xsl:for-each select="$pageHeadings">									<li><a href="#{ancestor-or-self::*[@id][last()]/@id}"><xsl:value-of select="."/></a></li>								</xsl:for-each>							</ul>						</xsl:if>						-->						<details data-media="handheld">							<summary>								<xsl:for-each select="$pageTitles">									<xsl:sort select="position()" order="descending"/>									<xsl:variable name="pos" select="position()"/>									<xsl:if test="position() &gt; 1">										<xsl:text> » </xsl:text>									</xsl:if>									<span data-dict=""><xsl:value-of select="@title"/></span>								</xsl:for-each>							</summary>							<xsl:copy-of select="sfm:data[@name='navi']/node()"/>						</details>					</header>				</div>				<div>					<nav data-media="screen">						<xsl:copy-of select="sfm:data[@name='navi']/node()"/>						<xsl:copy-of select="sfm:data[@name='dict.select']/node()"/>						<aside>							<xsl:copy-of select="sfm:data[@name='validator']/node()"/>						</aside>					</nav>					<main class="Content">						<xsl:if test="$chatNode">							<aside>								<xsl:copy-of select="$chatNode/node()"/>							</aside>						</xsl:if>						<xsl:copy-of select="sfm:data[@name='content']/node()"/>					</main>				</div>			</body>		</html>			</xsl:template></xsl:stylesheet>